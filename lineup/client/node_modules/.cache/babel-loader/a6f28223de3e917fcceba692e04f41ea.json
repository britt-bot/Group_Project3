{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jakers/Desktop/Group_Project3/lineup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jakers/Desktop/Group_Project3/lineup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/jakers/Desktop/Group_Project3/lineup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jakers/Desktop/Group_Project3/lineup/client/src/components/SearchBtn/index.js\";\nimport React from \"react\";\nimport \"./style.css\";\nimport { Button, Form, FormControl } from \"react-bootstrap\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Searchbtn(props) {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var history = useHistory();\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var url, page, response, searchResult, filteredEvents, festivals, resultsPages, index;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.prev = 1;\n              url = \"https://app.ticketmaster.com/discovery/v2/events?apikey=\".concat(process.env.REACT_APP_EVENT_API_KEY, \"&keyword=\");\n              page = _this.props.location.search ? _this.props.location.search : 1;\n              console.log(page);\n              _context.next = 7;\n              return axios.get(url + search + \"&locale=en-us&countryCode=US&segmentName=music&\" + page);\n\n            case 7:\n              response = _context.sent;\n              searchResult = response.data._embedded.events;\n              filteredEvents = searchResult.filter(function (events) {\n                return \"name\" in events;\n              });\n              festivals = filteredEvents.map(function (event) {\n                return {\n                  name: event.name,\n                  id: event.id,\n                  summary: event.description,\n                  ticket: event.url,\n                  logo: event.images[event.images.length - 1].url,\n                  status: event.dates.status.code,\n                  span: event.dates.spanMultipleDays,\n                  date: event.dates.start.localDate,\n                  start: event.dates.start.localTime,\n                  venues: event._embedded.venues[0].name,\n                  address: event._embedded.venues[0].address.line1,\n                  city: event._embedded.venues[0].city.name,\n                  state: event._embedded.venues[0].state.stateCode\n                };\n              });\n              resultsPages = [];\n\n              for (index = 1; index <= response.data.page.totalPages; index++) {\n                resultsPages.push({\n                  index: index,\n                  href: \"/search/\" + search + \"/\" + index\n                });\n              } // history.push(\"/search\");\n\n\n              history.push({\n                pathname: \"/search\",\n                // search: '?query=abc',\n                state: {\n                  festivals: festivals\n                }\n              });\n              console.log(resultsPages);\n              _context.next = 20;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 17]]);\n    }));\n\n    return function handleClick(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(event) {\n    setSearch(event.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    inline: true,\n    className: \"searchbtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    type: \"text\",\n    placeholder: \"Search\",\n    className: \"mr-sm-2 searchForm\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"searchclick\",\n    variant: \"outline-light\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ion-icon\", {\n    name: \"search-outline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default Searchbtn;","map":{"version":3,"sources":["/Users/jakers/Desktop/Group_Project3/lineup/client/src/components/SearchBtn/index.js"],"names":["React","Button","Form","FormControl","useState","axios","useHistory","Searchbtn","props","search","setSearch","history","handleClick","event","preventDefault","url","process","env","REACT_APP_EVENT_API_KEY","page","location","console","log","get","response","searchResult","data","_embedded","events","filteredEvents","filter","festivals","map","name","id","summary","description","ticket","logo","images","length","status","dates","code","span","spanMultipleDays","date","start","localDate","localTime","venues","address","line1","city","state","stateCode","resultsPages","index","totalPages","push","href","pathname","handleChange","target","value"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,WAAvB,QAA0C,iBAA1C;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AACxB,kBAA4BJ,QAAQ,CAAC,EAAD,CAApC;AAAA;AAAA,MAAOK,MAAP;AAAA,MAAeC,SAAf;;AACA,MAAMC,OAAO,GAAGL,UAAU,EAA1B;;AAEA,MAAMM,WAAW;AAAA,wEAAG,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBA,cAAAA,KAAK,CAACC,cAAN;AADkB;AAIVC,cAAAA,GAJU,qEAIuDC,OAAO,CAACC,GAAR,CAAYC,uBAJnE;AAKVC,cAAAA,IALU,GAKH,KAAI,CAACX,KAAL,CAAWY,QAAX,CAAoBX,MAApB,GAA6B,KAAI,CAACD,KAAL,CAAWY,QAAX,CAAoBX,MAAjD,GAA0D,CALvD;AAOhBY,cAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AAPgB;AAAA,qBASOd,KAAK,CAACkB,GAAN,CACrBR,GAAG,GAAGN,MAAN,GAAe,iDAAf,GAAmEU,IAD9C,CATP;;AAAA;AASVK,cAAAA,QATU;AAYZC,cAAAA,YAZY,GAYGD,QAAQ,CAACE,IAAT,CAAcC,SAAd,CAAwBC,MAZ3B;AAcZC,cAAAA,cAdY,GAcKJ,YAAY,CAACK,MAAb,CAAoB,UAACF,MAAD,EAAY;AACnD,uBAAO,UAAUA,MAAjB;AACD,eAFoB,CAdL;AAkBZG,cAAAA,SAlBY,GAkBAF,cAAc,CAACG,GAAf,CAAmB,UAACnB,KAAD,EAAW;AAC5C,uBAAO;AACLoB,kBAAAA,IAAI,EAAEpB,KAAK,CAACoB,IADP;AAELC,kBAAAA,EAAE,EAAErB,KAAK,CAACqB,EAFL;AAGLC,kBAAAA,OAAO,EAAEtB,KAAK,CAACuB,WAHV;AAILC,kBAAAA,MAAM,EAAExB,KAAK,CAACE,GAJT;AAKLuB,kBAAAA,IAAI,EAAEzB,KAAK,CAAC0B,MAAN,CAAa1B,KAAK,CAAC0B,MAAN,CAAaC,MAAb,GAAsB,CAAnC,EAAsCzB,GALvC;AAML0B,kBAAAA,MAAM,EAAE5B,KAAK,CAAC6B,KAAN,CAAYD,MAAZ,CAAmBE,IANtB;AAOLC,kBAAAA,IAAI,EAAE/B,KAAK,CAAC6B,KAAN,CAAYG,gBAPb;AAQLC,kBAAAA,IAAI,EAAEjC,KAAK,CAAC6B,KAAN,CAAYK,KAAZ,CAAkBC,SARnB;AASLD,kBAAAA,KAAK,EAAElC,KAAK,CAAC6B,KAAN,CAAYK,KAAZ,CAAkBE,SATpB;AAULC,kBAAAA,MAAM,EAAErC,KAAK,CAACc,SAAN,CAAgBuB,MAAhB,CAAuB,CAAvB,EAA0BjB,IAV7B;AAWLkB,kBAAAA,OAAO,EAAEtC,KAAK,CAACc,SAAN,CAAgBuB,MAAhB,CAAuB,CAAvB,EAA0BC,OAA1B,CAAkCC,KAXtC;AAYLC,kBAAAA,IAAI,EAAExC,KAAK,CAACc,SAAN,CAAgBuB,MAAhB,CAAuB,CAAvB,EAA0BG,IAA1B,CAA+BpB,IAZhC;AAaLqB,kBAAAA,KAAK,EAAEzC,KAAK,CAACc,SAAN,CAAgBuB,MAAhB,CAAuB,CAAvB,EAA0BI,KAA1B,CAAgCC;AAblC,iBAAP;AAeD,eAhBe,CAlBA;AAoCZC,cAAAA,YApCY,GAoCG,EApCH;;AAqChB,mBAASC,KAAT,GAAiB,CAAjB,EAAoBA,KAAK,IAAIjC,QAAQ,CAACE,IAAT,CAAcP,IAAd,CAAmBuC,UAAhD,EAA4DD,KAAK,EAAjE,EAAqE;AACnED,gBAAAA,YAAY,CAACG,IAAb,CAAkB;AAChBF,kBAAAA,KAAK,EAAEA,KADS;AAEhBG,kBAAAA,IAAI,EAAE,aAAanD,MAAb,GAAsB,GAAtB,GAA4BgD;AAFlB,iBAAlB;AAID,eA1Ce,CA4ChB;;;AACA9C,cAAAA,OAAO,CAACgD,IAAR,CAAa;AACXE,gBAAAA,QAAQ,EAAE,SADC;AAEX;AACAP,gBAAAA,KAAK,EAAE;AAAEvB,kBAAAA,SAAS,EAATA;AAAF;AAHI,eAAb;AAMAV,cAAAA,OAAO,CAACC,GAAR,CAAYkC,YAAZ;AAnDgB;AAAA;;AAAA;AAAA;AAAA;AAqDhBnC,cAAAA,OAAO,CAACC,GAAR;;AArDgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXV,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAyDA,MAAMkD,YAAY,GAAG,SAAfA,YAAe,CAACjD,KAAD,EAAW;AAC9BH,IAAAA,SAAS,CAACG,KAAK,CAACkD,MAAN,CAAaC,KAAd,CAAT;AACD,GAFD;;AAIA,sBACE,oBAAC,IAAD;AAAM,IAAA,MAAM,MAAZ;AAAa,IAAA,SAAS,EAAC,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,QAFd;AAGE,IAAA,SAAS,EAAC,oBAHZ;AAIE,IAAA,QAAQ,EAAEF,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE,oBAAC,MAAD;AACE,IAAA,SAAS,EAAC,aADZ;AAEE,IAAA,OAAO,EAAC,eAFV;AAGE,IAAA,OAAO,EAAElD,WAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AAAU,IAAA,IAAI,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CAPF,CADF;AAiBD;;AAED,eAAeL,SAAf","sourcesContent":["import React from \"react\";\nimport \"./style.css\";\nimport { Button, Form, FormControl } from \"react-bootstrap\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Searchbtn(props) {\n  const [search, setSearch] = useState(\"\");\n  const history = useHistory();\n\n  const handleClick = async (event) => {\n    event.preventDefault();\n\n    try {\n      const url = `https://app.ticketmaster.com/discovery/v2/events?apikey=${process.env.REACT_APP_EVENT_API_KEY}&keyword=`;\n      const page = this.props.location.search ? this.props.location.search : 1;\n\n      console.log(page);\n\n      const response = await axios.get(\n        url + search + \"&locale=en-us&countryCode=US&segmentName=music&\" + page\n      );\n      let searchResult = response.data._embedded.events;\n\n      let filteredEvents = searchResult.filter((events) => {\n        return \"name\" in events;\n      });\n\n      let festivals = filteredEvents.map((event) => {\n        return {\n          name: event.name,\n          id: event.id,\n          summary: event.description,\n          ticket: event.url,\n          logo: event.images[event.images.length - 1].url,\n          status: event.dates.status.code,\n          span: event.dates.spanMultipleDays,\n          date: event.dates.start.localDate,\n          start: event.dates.start.localTime,\n          venues: event._embedded.venues[0].name,\n          address: event._embedded.venues[0].address.line1,\n          city: event._embedded.venues[0].city.name,\n          state: event._embedded.venues[0].state.stateCode,\n        };\n      });\n\n      let resultsPages = [];\n      for (let index = 1; index <= response.data.page.totalPages; index++) {\n        resultsPages.push({\n          index: index,\n          href: \"/search/\" + search + \"/\" + index,\n        });\n      }\n\n      // history.push(\"/search\");\n      history.push({\n        pathname: \"/search\",\n        // search: '?query=abc',\n        state: { festivals },\n      });\n\n      console.log(resultsPages);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleChange = (event) => {\n    setSearch(event.target.value);\n  };\n\n  return (\n    <Form inline className=\"searchbtn\">\n      <FormControl\n        type=\"text\"\n        placeholder=\"Search\"\n        className=\"mr-sm-2 searchForm\"\n        onChange={handleChange}\n      />\n      <Button\n        className=\"searchclick\"\n        variant=\"outline-light\"\n        onClick={handleClick}\n      >\n        <ion-icon name=\"search-outline\"></ion-icon>\n      </Button>\n    </Form>\n  );\n}\n\nexport default Searchbtn;\n"]},"metadata":{},"sourceType":"module"}