{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\mark.morrison\\\\Desktop\\\\I DO CODE\\\\Group_Project3\\\\lineup\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\mark.morrison\\\\Desktop\\\\I DO CODE\\\\Group_Project3\\\\lineup\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\mark.morrison\\\\Desktop\\\\I DO CODE\\\\Group_Project3\\\\lineup\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\mark.morrison\\\\Desktop\\\\I DO CODE\\\\Group_Project3\\\\lineup\\\\client\\\\src\\\\components\\\\SearchBtn\\\\index.js\";\nimport React from \"react\";\nimport \"./style.css\";\nimport { Button, Form, FormControl } from \"react-bootstrap\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Searchbtn() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var history = useHistory();\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var url, response, searchResult, filteredEvents, festivals;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.prev = 1;\n              url = \"https://app.ticketmaster.com/discovery/v2/events?apikey=\".concat(process.env.REACT_APP_EVENT_API_KEY, \"&keyword=\");\n              _context.next = 5;\n              return axios.get(url + search + \"&locale=en-us&countryCode=US&segmentName=music\");\n\n            case 5:\n              response = _context.sent;\n              searchResult = response.data._embedded.events;\n              filteredEvents = searchResult.filter(function (events) {\n                return \"name\" in events;\n              });\n              festivals = filteredEvents.map(function (event) {\n                return {\n                  name: event.name,\n                  id: event.id,\n                  summary: event.description,\n                  ticket: event.url,\n                  logo: event.images[event.images.length - 1].url,\n                  status: event.dates.status.code,\n                  span: event.dates.spanMultipleDays,\n                  date: event.dates.start.localDate,\n                  start: event.dates.start.localTime,\n                  venues: event._embedded.venues[0].name,\n                  address: event._embedded.venues[0].address.line1,\n                  city: event._embedded.venues[0].city.name,\n                  state: event._embedded.venues[0].state.stateCode\n                };\n              }); // let resultsPages = [];\n              // for (let index = 1; index <= response.data.page.totalPages; index++) {\n              //   resultsPages.push({\n              //     index: index,\n              //     href: \"/results/\" + search + \"/\" + index,\n              //   });\n              // }\n              // history.push(\"/search\");\n\n              history.push({\n                pathname: \"/search\",\n                // search: '?query=abc',\n                state: {\n                  festivals: festivals\n                }\n              });\n              console.log(festivals);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 13]]);\n    }));\n\n    return function handleClick(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(event) {\n    setSearch(event.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    inline: true,\n    className: \"searchbtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    type: \"text\",\n    placeholder: \"Search\",\n    className: \"mr-sm-2 searchForm\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"searchclick\",\n    variant: \"outline\",\n    type: \"submit\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ion-icon\", {\n    name: \"search-outline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default Searchbtn;","map":{"version":3,"sources":["C:/Users/mark.morrison/Desktop/I DO CODE/Group_Project3/lineup/client/src/components/SearchBtn/index.js"],"names":["React","Button","Form","FormControl","useState","axios","useHistory","Searchbtn","search","setSearch","history","handleClick","event","preventDefault","url","process","env","REACT_APP_EVENT_API_KEY","get","response","searchResult","data","_embedded","events","filteredEvents","filter","festivals","map","name","id","summary","description","ticket","logo","images","length","status","dates","code","span","spanMultipleDays","date","start","localDate","localTime","venues","address","line1","city","state","stateCode","push","pathname","console","log","handleChange","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./style.css\";\r\nimport { Button, Form, FormControl } from \"react-bootstrap\";\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Searchbtn() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  const handleClick = async (event) => {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      const url = `https://app.ticketmaster.com/discovery/v2/events?apikey=${process.env.REACT_APP_EVENT_API_KEY}&keyword=`;\r\n\r\n      const response = await axios.get(\r\n        url + search + \"&locale=en-us&countryCode=US&segmentName=music\"\r\n      );\r\n      let searchResult = response.data._embedded.events;\r\n\r\n      let filteredEvents = searchResult.filter((events) => {\r\n        return \"name\" in events;\r\n      });\r\n\r\n      let festivals = filteredEvents.map((event) => {\r\n        return {\r\n          name: event.name,\r\n          id: event.id,\r\n          summary: event.description,\r\n          ticket: event.url,\r\n          logo: event.images[event.images.length - 1].url,\r\n          status: event.dates.status.code,\r\n          span: event.dates.spanMultipleDays,\r\n          date: event.dates.start.localDate,\r\n          start: event.dates.start.localTime,\r\n          venues: event._embedded.venues[0].name,\r\n          address: event._embedded.venues[0].address.line1,\r\n          city: event._embedded.venues[0].city.name,\r\n          state: event._embedded.venues[0].state.stateCode,\r\n        };\r\n      });\r\n\r\n      // let resultsPages = [];\r\n      // for (let index = 1; index <= response.data.page.totalPages; index++) {\r\n      //   resultsPages.push({\r\n      //     index: index,\r\n      //     href: \"/results/\" + search + \"/\" + index,\r\n      //   });\r\n      // }\r\n\r\n      // history.push(\"/search\");\r\n      history.push({\r\n        pathname: \"/search\",\r\n        // search: '?query=abc',\r\n        state: { festivals },\r\n      });\r\n\r\n      console.log(festivals);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setSearch(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <Form inline className=\"searchbtn\">\r\n      <FormControl\r\n        type=\"text\"\r\n        placeholder=\"Search\"\r\n        className=\"mr-sm-2 searchForm\"\r\n        onChange={handleChange}\r\n      />\r\n      <Button\r\n        className=\"searchclick\"\r\n        variant=\"outline\"\r\n        type=\"submit\"\r\n        onClick={handleClick}\r\n      >\r\n        <ion-icon name=\"search-outline\"></ion-icon>\r\n      </Button>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default Searchbtn;\r\n"]},"metadata":{},"sourceType":"module"}